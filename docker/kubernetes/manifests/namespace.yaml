apiVersion: v1
kind: Namespace
metadata:
  name: eemt
  labels:
    name: eemt
    app.kubernetes.io/name: eemt
    app.kubernetes.io/instance: eemt-system
    app.kubernetes.io/version: "2.0"
    app.kubernetes.io/component: namespace
    app.kubernetes.io/part-of: eemt-suite
    app.kubernetes.io/managed-by: helm
  annotations:
    description: "EEMT (Effective Energy and Mass Transfer) Algorithm Suite namespace"
    maintainer: "tswetnam@cyverse.org"
    documentation: "https://github.com/cyverse-gis/eemt"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: eemt-resource-quota
  namespace: eemt
  labels:
    app.kubernetes.io/name: eemt
    app.kubernetes.io/component: resource-quota
spec:
  hard:
    # Compute resources
    requests.cpu: "50"      # 50 CPU cores total
    requests.memory: 200Gi  # 200GB memory total
    limits.cpu: "100"       # 100 CPU cores max
    limits.memory: 400Gi    # 400GB memory max
    
    # Storage
    persistentvolumeclaims: "20"
    requests.storage: 1Ti   # 1TB storage total
    
    # Object counts
    pods: "100"
    services: "20"
    secrets: "20"
    configmaps: "20"
    
    # For large-scale geospatial processing
    requests.nvidia.com/gpu: "10"
    limits.nvidia.com/gpu: "20"
---
apiVersion: v1
kind: LimitRange
metadata:
  name: eemt-limit-range
  namespace: eemt
  labels:
    app.kubernetes.io/name: eemt
    app.kubernetes.io/component: limit-range
spec:
  limits:
  # Default pod limits for EEMT workloads
  - default:
      cpu: "2"
      memory: "4Gi"
      ephemeral-storage: "10Gi"
    defaultRequest:
      cpu: "500m"
      memory: "1Gi"
      ephemeral-storage: "5Gi"
    type: Container
  
  # PVC limits for geospatial data
  - max:
      storage: "500Gi"  # Max 500GB per PVC
    min:
      storage: "1Gi"    # Min 1GB per PVC
    type: PersistentVolumeClaim